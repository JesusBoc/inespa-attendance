import{s}from"./supabase-BZquj9zQ.js";class o{data=new Map;async delete(e){const{error:r}=await s.from(this.tableName).delete().eq("id",e);if(r)throw new Error(r.message);this.data.delete(e)}getAll(){return this.data}getById(e){return this.data.get(e)}async reload(){this.data=await this.fetchAll()}}class n extends o{tableName="perfiles_usuarios";static async getUserRole(e){const{data:r,error:t}=await s.from("perfiles_usuarios").select("rol").eq("id",e).single();if(t)throw new Error(t.message);return r.rol}async fetchAll(){const e=new Map,{data:r,error:t}=await this.lookTable();if(t)throw new Error(t.message);if(!r||r.length===0)return e;for(const a of r)e.set(a.id,{idFK:a.id,name:a.nombre,lastName:a.apellido});return e}async insert(e){const{data:r,error:t}=await s.from(this.tableName).insert({id:e.idFK,nombre:e.name,apellido:e.lastName,rol:this.role,activo:!0}).select("id").single();if(t)throw new Error(t.message);if(!r)throw new Error("Couldnt retrieve id");return r.id}}export{o as B,n as U};
