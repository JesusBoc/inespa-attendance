import{s as l}from"./supabase-BZquj9zQ.js";import{r as p}from"./RoleUtils-Bzeu-8KE.js";const m=await p(),c=m?.user,i=m?.perfil;async function f(){if(!c||!i)return;const e=i.rol;e=="docente"&&await d("clasesMain","clases","Mis clases",h),(e=="docente"||e=="coordinador")&&await d("clasesMain","reportes","Reportes",C),document.body.style.opacity="1"}async function d(e,t,r,n){const a=document.getElementById(e);if(!a)throw new Error(`Element ${e} not found`);const o=document.createElement("section");o.id=t;const s=document.createElement("h3");s.textContent=r,s.className="sectionTitle",o.appendChild(s),await n(o),a.appendChild(o)}function u(e,t,r){const n=document.createElement("div");n.className="card";const a=document.createElement("strong");a.innerText=`${e}`,a.className="classInfo";const o=document.createElement("br"),s=document.createElement("button");return s.innerText=t,s.onclick=r,s.className="goAttendance",n.appendChild(a),n.appendChild(o),n.appendChild(s),n}async function h(e){if(!c)return;const t=document.createElement("div");t.className="cardContainer";const{data:r,error:n}=await l.from("vista_clases_docente").select("*").eq("docente_id",c.id);if(n){alert(n.message);return}if(!r||r.length===0){t.textContent="No tienes clases asignadas";return}r.forEach(a=>{const o=u(`${a.grupo} - ${a.materia}`,"Tomar asistencia",()=>E(a.dmg_id??""));t.appendChild(o)}),e.appendChild(t)}async function C(e){if(!c)return;const t=document.createElement("div");t.className="cardContainer";const{data:r,error:n}=await l.from("grupos").select("*").order("nivel").order("nombre");if(n){alert(n.message);return}if(!r||r.length===0){t.textContent="No puedes ver reportes";return}r.forEach(a=>{const o=u(a.nombre,"Ver reporte",()=>g(a.id));t.appendChild(o)}),e.appendChild(t)}function E(e){e!=""&&location.replace(`asistencia.html?dmg_id=${e}`)}function g(e){window.location.href=`dashboard.html?grupo_id=${e}`}f();
