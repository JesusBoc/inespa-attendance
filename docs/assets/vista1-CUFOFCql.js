import{s as l}from"./supabase-UP22jYpv.js";import{L as f}from"./LogoutButton-BK6TZlWM.js";import{r as h}from"./RoleUtils-Bx0NRCUv.js";const m=await h(),i=m?.user,c=m?.perfil,u=document.getElementsByTagName("header").item(0);if(!u)throw new Error("No header in this document");const g=new f;u.appendChild(g.render());async function C(){if(!i||!c)return;const t=document.getElementById("saludo");t.innerText=`Bienvenido/a, ${c.nombre} ${c.apellido}`;const e=c.rol;e=="docente"&&await d("clasesMain","clases","Mis clases",E),(e=="docente"||e=="coordinador")&&await d("clasesMain","reportes","Reportes",w),document.body.style.opacity="1"}async function d(t,e,r,n){const o=document.getElementById(t);if(!o)throw new Error(`Element ${t} not found`);const a=document.createElement("section");a.id=e;const s=document.createElement("h3");s.textContent=r,s.className="sectionTitle",a.appendChild(s),await n(a),o.appendChild(a)}function p(t,e,r){const n=document.createElement("div");n.className="card";const o=document.createElement("strong");o.innerText=`${t}`,o.className="classInfo";const a=document.createElement("br"),s=document.createElement("button");return s.innerText=e,s.onclick=r,s.className="goAttendance",n.appendChild(o),n.appendChild(a),n.appendChild(s),n}async function E(t){if(!i)return;const e=document.createElement("div");e.className="cardContainer";const{data:r,error:n}=await l.from("vista_clases_docente").select("*").eq("docente_id",i.id);if(n){alert(n.message);return}if(!r||r.length===0){e.textContent="No tienes clases asignadas";return}r.forEach(o=>{const a=p(`${o.grupo} - ${o.materia}`,"Tomar asistencia",()=>b(o.dmg_id??""));e.appendChild(a)}),t.appendChild(e)}async function w(t){if(!i)return;const e=document.createElement("div");e.className="cardContainer";const{data:r,error:n}=await l.from("grupos").select("*").order("nivel").order("nombre");if(n){alert(n.message);return}if(!r||r.length===0){e.textContent="No puedes ver reportes";return}r.forEach(o=>{const a=p(o.nombre,"Ver reporte",()=>y(o.id));e.appendChild(a)}),t.appendChild(e)}function b(t){t!=""&&location.replace(`asistencia.html?dmg_id=${t}`)}function y(t){window.location.href=`dashboard.html?grupo_id=${t}`}C();
